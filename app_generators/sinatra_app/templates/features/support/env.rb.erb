# These versions are required for rack-test and webrat to play together at the moment.
gem 'rack-test', '=0.3.0'
gem 'aslakhellesoy-webrat', '=0.4.4.1'

require File.join(File.dirname(__FILE__), '..', '..', <%- unless tiny -%>'lib', <%- end -%>'<%= app_name %>.rb')
<%= app_klass -%>.set(
  :environment => :test,
  :run => false,
  :raise_errors => true,
  :logging => false
)

require 'rack/test'
require 'webrat'
Webrat.configure do |config|
  config.mode = :rack
end

class <%= app_klass -%>World
  include Rack::Test::Methods
  include Webrat::Methods
  include Webrat::Matchers
  Webrat::Methods.delegate_to_session :response_code, :response_body

  def app
    <%= app_klass %>
  end
end

World { <%= app_klass -%>World.new }